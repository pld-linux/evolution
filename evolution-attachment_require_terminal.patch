--- evolution-1.4.6/mail/mail-display.c~	2003-10-08 18:06:09.000000000 +0200
+++ evolution-1.4.6/mail/mail-display.c	2004-03-19 11:36:20.991908864 +0100
@@ -374,6 +374,7 @@
 	GList *apps, *children, *c;
 	GnomeVFSMimeApplication *app;
 	char *command, *filename;
+	gchar *terminal = NULL;
 	const char *tmpdir;
 	
 	handler = mail_lookup_handler (g_object_get_data(user_data, "mime_type"));
@@ -422,9 +423,24 @@
 		return;
 	}
 	
-	command = g_strdup_printf ("%s %s%s &", app->command,
+	if (app->requires_terminal) {
+		gchar *terminal_exec, *terminal_exec_arg;
+		GConfClient *gconf = mail_config_get_gconf_client ();
+		
+		terminal_exec = gconf_client_get_string (gconf, "/desktop/gnome/applications/terminal/exec", NULL);
+		terminal_exec_arg = gconf_client_get_string (gconf, "/desktop/gnome/applications/terminal/exec_arg", NULL);
+		
+		if (terminal_exec && terminal_exec_arg)
+			terminal = g_strdup_printf("%s %s",terminal_exec, terminal_exec_arg);
+		
+		g_free(terminal_exec);
+		g_free(terminal_exec_arg);
+	}
+	
+	command = g_strdup_printf ("%s %s %s%s &", terminal ? terminal : "", app->command,
 				   app->expects_uris == GNOME_VFS_MIME_APPLICATION_ARGUMENT_TYPE_URIS ?
 				   "file://" : "", filename);
+	g_free (terminal);
 	g_free (filename);
 	
 	system (command);
